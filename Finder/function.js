function setBackgroundImage(){let a=localStorage.getItem("backgroundImage")||"red.jpg";document.getElementsByTagName("body")[0].style.backgroundImage=`url(${a})`}$(document).ready(function(){let a=JSON.parse(localStorage.getItem("nanaxi"))||[];document.querySelectorAll(".listing-row").forEach(b=>{let c=b.getAttribute("id");-1!==a.indexOf(c)&&(b.style.backgroundColor="red")}),$(document).on("click",".listing-row",function(){$(this).closest("tr").css("background-color","red");const a=$(this).closest("tr").attr("id");let b=JSON.parse(localStorage.getItem("nanaxi"))||[];b.push(a),localStorage.setItem("nanaxi",JSON.stringify(b))}),reloadSearch(),reloadAutoRefreshRate(),setBackgroundImage();let b=localStorage.getItem("records")||"";if(console.log(b),b){let a=document.querySelector(".listing-row").getAttribute("id");console.log(a),b!==a&&notifySound()}b=document.querySelector(".listing-row").getAttribute("id"),localStorage.setItem("records",b)});const saveRefreshRate=()=>{let a=document.getElementById("sec").value;localStorage.setItem("refreshRate",a)},reloadAutoRefreshRate=()=>{let a=localStorage.getItem("refreshRate")||4;document.getElementById("sec").value=a},copyLIMIT=a=>{console.log("copyLIMIT",a);let b=JSON.parse(localStorage.getItem("limit"));const c=b.start,d=document.createElement("textArea");a=a.replace("\u2605","").trim(),a=a.replace("\u2122","").trim(),a=a.replace("(Factory New)","Factory New").trim(),a=a.replace("(Minimal Wear)","Minimal Wear").trim(),a=a.replace("(Field-Tested)","Field Tested").trim(),a=a.replace("(Well-Worn)","Well Worn").trim(),a=a.replace("(Battle-Scarred)","Battle Scarred").trim(),d.value=b.name?`${c} ${a} ${b.end}`:`${c} ${a}`,document.body.appendChild(d),d.select(),d.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(d)},copyCHINA=a=>{console.log("copyCHINA",a);const b=document.createElement("textArea");a=a.replace("\u2605","").trim(),a=a.replace("\u2122","").trim(),a=a.replace("(Factory New)","Factory New").trim(),a=a.replace("(Minimal Wear)","Minimal Wear").trim(),a=a.replace("(Field-Tested)","Field Tested").trim(),a=a.replace("(Well-Worn)","Well Worn").trim(),a=a.replace("(Battle-Scarred)","Battle Scarred").trim(),b.value="\u4F60\u597D\uFF0C\u5982\u679C\u4F60\u60F3\u4EA4\u6613\u52A0\u6211\u3002 \u6211\u5BF9\u4F60\u611F\u5174\u8DA3 "+a,document.body.appendChild(b),b.select(),b.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(b)},copyDEAL=a=>{console.log("copyDEAL",a);let b=JSON.parse(localStorage.getItem("deal"));const c=b.start,d=document.createElement("textArea");a=a.replace("\u2605","").trim(),a=a.replace("\u2122","").trim(),a=a.replace("(Factory New)","Factory New").trim(),a=a.replace("(Minimal Wear)","Minimal Wear").trim(),a=a.replace("(Field-Tested)","Field Tested").trim(),a=a.replace("(Well-Worn)","Well Worn").trim(),a=a.replace("(Battle-Scarred)","Battle Scarred").trim(),d.value=b.name?`${c} ${a} ${b.end}`:`${c} ${a}`,document.body.appendChild(d),d.select(),d.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(d)};function removeHighlighting(a){a.each(function(){var a=$(this);a.replaceWith(a.html())})}function addHighlighting(a,b){var c=a.text(),d=c.replace(b,"<em>"+b+"</em>");a.html(d)}$("#searchitem").keyup(function(){var a=this.value.toLowerCase().trim();localStorage.setItem("search",a),removeHighlighting($("table tr em")),$("table tr").each(function(b){b&&$(this).find("td").each(function(){var b=$(this).text().toLowerCase().trim(),c=b.indexOf(a);0===c&&addHighlighting($(this),a);var d=-1==c;return $(this).closest("tr").toggle(!d),d})})});function reloadSearch(){var a=localStorage.getItem("search");a&&0!==a.length&&($("#searchitem").val(a),removeHighlighting($("table tr em")),$("table tr").each(function(b){b&&$(this).find("td").each(function(){var b=$(this).text().toLowerCase().trim(),c=b.indexOf(a);0===c&&addHighlighting($(this),a);var d=-1==c;return $(this).closest("tr").toggle(!d),d})}))}const addSubmitListener=()=>{var a=document.getElementById("search-form");a.addEventListener("submit",function(){for(var b,c=a.getElementsByTagName("input"),d=0;d<c.length;d++)b=c[d],b.name&&!b.value&&(b.name="")})},addButtonListener=()=>{const a=document.getElementsByClassName("user-count");for(let b of a)b.addEventListener("click",()=>{if("Wait"!=b.innerHTML){b.innerHTML="Wait";const a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&(b.innerHTML=this.responseText)};const c=b.getAttribute("username");a.open("GET","./user-count?name="+c,!0),a.send()}})};function setCheckboxesStatesFromLocalStorage(){const notificationCheckBox=document.getElementById("notificationCheckBox"),notificationState=eval(localStorage.notificationIsOn);notificationCheckBox.checked=notificationState,document.getElementById("refreshCheckBox").checked=eval(localStorage.refreshIsOn)}function saveCheckBoxesState(){const a=document.getElementById("notificationCheckBox");localStorage.notificationIsOn=a.checked;const b=document.getElementById("refreshCheckBox");localStorage.refreshIsOn=b.checked}function checkNewRecord(){const a=document.querySelector("body > div > div > div > table > tbody > tr:nth-child(1)")?.innerText;void 0===a||a!==localStorage.lastRecord&&(notifySound(),localStorage.lastRecord=a)}function notifySound(){const a=document.getElementById("notificationCheckBox").checked;if(a){const a=document.getElementById("sound");a.volume=.4,a.play()}}function main(){setCheckboxesStatesFromLocalStorage();let a=localStorage.getItem("refreshRate")||12;a=1e3*parseInt(a),setInterval(()=>{const a=document.getElementById("refreshCheckBox").checked;a&&location.reload()},a)}main();